# Lab 12: Kubernetes ConfigMaps

## Task 1: Upgrade Application for Persistence

- Added a counter logic to track the number of visits.

- Created a new `/visits` endpoint to display the visit count.

- Persisted the counter in a visits.txt file using Docker volumes.


## Task 2: ConfigMap Implementation

### 1. ConfigMap Creation
- Created a `config.json file` in the files directory:

    ```json
    {
        "appName": "Lab12-App",
            "version": "1.0.0",
        "description": "A sample application for Kubernetes ConfigMaps"
    }
    ```
- Added a `ConfigMap` manifest to the Helm chart (`templates/configmap.yaml`):

    ```yaml
    apiVersion: v1
    kind: ConfigMap
    metadata:
        name: app-config
    data:
        config.json: |-
            {
                "appName": "Lab12-App",
                "version": "1.0.0",
                "description": "A sample application for Kubernetes ConfigMaps"
            }
    ```
### 2. Deployment Updates
Updated deployment.yaml to mount the ConfigMap as a volume.

### 3. Verification
- Installed the updated Helm chart:

    ```bash
    > helm upgrade --install app-python . -f values.yaml

    Release "python-app" has been upgraded. Happy Helming!
    NAME: python-app
    LAST DEPLOYED: Tue Mar 11 16:22:30 2025
    NAMESPACE: default
    STATUS: deployed
    REVISION: 8
    ```

- Verified the pod is running:

    ```bash
    >kubectl get po

    NAME                                    READY   STATUS    RESTARTS      AGE
    python-app-5f64bcbf67-849d7             1/1     Running   0             59s
    vault-0                                 1/1     Running   1 (22m ago)   41h
    vault-agent-injector-66f45b5fd5-vtkgl   1/1     Running   1 (22m ago)   41h
    ```

- Verified the ConfigMap is mounted:

    ```bash
    > kubectl exec python-app-5f64bcbf67-849d7  -- cat /config.json

    {
        "appName": "Lab12-App",
        "version": "1.0.0",
        "description": "A sample application for Kubernetes ConfigMaps"
    }
    ```